dist:     trusty
sudo:     required

language: cpp

os:
  - linux

before_install:
  - sudo apt-get update -qq

install: 
  - sudo apt-get install -y libc++-dev libboost-dev 
  - sudo apt-get install -y libboost-system-dev libboost-program-options-dev 
  - sudo apt-get install -y libboost-filesystem-dev libboost-date-time-dev libboost-regex-dev valgrind doxygen

compiler:
  - g++
  - clang++ 

branches:
  only:
    - mambaru

script:
  - export BRANCH=$(if [ "$TRAVIS_PULL_REQUEST" == "false" ]; then echo $TRAVIS_BRANCH; else echo $TRAVIS_PULL_REQUEST_BRANCH; fi)
  - echo "TRAVIS_BRANCH=$TRAVIS_BRANCH, PR=$PR, BRANCH=$BRANCH"
  - mkdir build
  - cd build
  - echo "CMAKE_CXX_STANDARD=     $STANDARD"
  - cmake .. -DBUILD_TESTING=ON -DPARANOID_WARNING=ON -DCMAKE_BUILD_TYPE=$BUILD_TYPE -DCMAKE_CXX_STANDARD=$STANDARD -DCMAKE_RULE_MESSAGES:BOOL=OFF -DCMAKE_VERBOSE_MAKEFILE:BOOL=ON -DCLANG_LIBPP="-stdlib=libc++"
  - cmake --build .
  - ctest --output-on-failure
